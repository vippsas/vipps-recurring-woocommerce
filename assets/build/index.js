(()=>{"use strict";var e={n:r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return e.d(t,{a:t}),t},d:(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=window.React,t=window.wp.element,n=window.wp.apiFetch;var a=e.n(n);const c=window.wp.i18n;function i({logo:e}){return(0,r.createElement)("div",{className:"vipps-recurring-payment-redirect-page"},(0,r.createElement)("div",{className:"vipps-recurring-payment-redirect-page__container"},(0,r.createElement)("div",{className:"vipps-recurring-payment-redirect-page__container__content"},(0,r.createElement)("div",{className:"vipps-recurring-payment-redirect-page__container__content__logo"},(0,r.createElement)("img",{src:e,alt:"Logo"})),(0,r.createElement)("div",{className:"vipps-recurring-payment-redirect-page__container__content__loading"},(0,r.createElement)("div",{className:"vipps-recurring-payment-redirect-page__container__content__loading__spinner"})),(0,r.createElement)("div",{className:"vipps-recurring-payment-redirect-page__container__content__text"},(0,r.createElement)("p",null,(0,c.__)("Verifying your payment. Please wait.","vipps-recurring-payments-gateway-for-woocommerce")),(0,r.createElement)("p",null,(0,c.__)("You will be redirected shortly.","vipps-recurring-payments-gateway-for-woocommerce"))))))}function o({homeUrl:e,logo:t}){return(0,r.createElement)("div",{className:"vipps-recurring-payment-redirect-page"},(0,r.createElement)("div",{className:"vipps-recurring-payment-redirect-page__container"},(0,r.createElement)("div",{className:"vipps-recurring-payment-redirect-page__container__content"},(0,r.createElement)("div",{className:"vipps-recurring-payment-redirect-page__container__content__logo"},(0,r.createElement)("img",{src:t,alt:"Logo"})),(0,r.createElement)("div",{className:"vipps-recurring-payment-redirect-page__container__content__text"},(0,r.createElement)("p",null,(0,r.createElement)("h1",{className:"vipps-recurring-payment-redirect-page__container__content__text__heading"},(0,c.__)("Order cancelled","vipps-recurring-payments-gateway-for-woocommerce"))),(0,r.createElement)("p",null,(0,c.__)("Your payment has been cancelled.","vipps-recurring-payments-gateway-for-woocommerce")),(0,r.createElement)("p",null,(0,r.createElement)("a",{href:e,className:"btn button vipps-recurring-payment-redirect-page__container__content__text__action"},(0,c.__)("Continue shopping","vipps-recurring-payments-gateway-for-woocommerce")))))))}var p,l;document.getElementById("vipps-mobilepay-recurring-app")&&(p=document.querySelector("#vipps-mobilepay-recurring-app"),l=(0,r.createElement)((function(){const{logo:e,homeUrl:n}=window.VippsMobilePaySettings,c=new URLSearchParams(window.location.search),[p,l]=(0,t.useState)(null),s=setInterval((()=>{a()({path:`/vipps-mobilepay-recurring/v1/orders/status/${c.get("order_id")}?key=${c.get("key")}`,method:"GET"}).then((e=>l(e)))}),1e3);(0,t.useEffect)((()=>{p&&"PENDING"!==p.status&&!m&&(clearInterval(s),window.location.href=p.redirect_url)}),[p]);const m=(0,t.useMemo)((()=>!!p&&["EXPIRED","STOPPED"].includes(p.status)),[p]);return m?(0,r.createElement)(o,{logo:e,homeUrl:n}):(0,r.createElement)(i,{logo:e})}),null),t.createRoot?(0,t.createRoot)(p).render(l):(0,t.render)(l,p))})();